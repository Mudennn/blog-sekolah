---
import {getCollection , CollectionEntry} from "astro:content"

import Card from "../../components/Card.astro";
import { slugify, formatBlogPosts } from "../../js/utils";
import MainLayout from "../../layouts/MainLayout.astro"

export async function getStaticPaths(){
    return [
        {
            params: {category: slugify("Kripto")},
            props: {name: "Kripto"},
        },
       
        {
            params: {category: slugify("Web 3")},
            props: {name: "Web 3"},
            
        },
        {
            params: {category: slugify("Blockchain")},
            props: {name: "Blockchain"},
            
        },
        {
            params: {category: slugify("Ethereum")},
            props: {name: "Ethereum"},
            
        },
       
    ]
}

const { category } = Astro.params;
const { name } = Astro.props;
console.log("ðŸš€ ~ file: [category].astro:36 ~ nama:", name)


const blogPosts = await getCollection("blog")
const formattedPosts: CollectionEntry<"blog">[] = formatBlogPosts(blogPosts);
const catPosts = formattedPosts.filter(
  (post) => slugify(post.data.category) === category
);

---

<MainLayout title= {name} >
    <section aria-label={`Semua blog tentang ${name}`}>
      <div class="p-4">
          <h2 class="lg:text-3xl text-3xl font-bold text-center text-white">Kategori</h2>
          <h3 class="text-sm lg:text-base py-2 text-center text-jacarta-200 mt-2 capitalize">
            Semua blog tentang {name.replace(/-/g, " ")} 
          </h3>
        </div>
      
        <div class="px-4 mx-auto max-w-7xl sm:px-6 md:px-12 lg:px-24">
          <div class="px-4 py-8 mx-2 sm:mx-auto max-w-7xl lg:py-18">
            <div
              class="grid gap-8 lg:grid-cols-3 sm:max-w-sm sm:mx-auto lg:max-w-full"
            > 
              {
                catPosts.map((post) => (
                <Card data={post.data} url={post.slug} tagType="h2" />
                  
                ))
              }
            </div>
          </div>
      
      
        </div>
    </section>
</MainLayout>